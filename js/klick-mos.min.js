var klick_mos_send_command=function(s,e,c,t){t="undefined"==typeof t||t;var i={action:"klick_mos_ajax",subaction:s,nonce:klick_mos_ajax_nonce,data:e};jQuery.post(ajaxurl,i,function(s){if(t)try{var e=JSON.parse(s)}catch(i){return console.log(i),void console.log(s)}else var e=s;"undefined"!=typeof c&&c(e)})};jQuery(document).ready(function(s){klick_mos=klick_mos(klick_mos_send_command)});var klick_mos=function(s){function e(s){var e=d("#klick_mos_sc_name").val(),c=d("#klick_mos_sc_desc").val(),t=tinymce.get("klick_mos_sc_editor"),s=s;_(e);return null!==t?content=t.getContent():content=d("#klick_mos_sc_editor").val(),l()===!1?(k(".klick-notice-message",klick_mos_admin.notice_for_sc_name),!1):m()===!1?(k(".klick-notice-message",klick_mos_admin.notice_for_sc_desc),!1):"name="+e+"&desc="+c+"&content="+content+"&command="+s}function c(){d(".klick-mos-overlay").show();var e="reload=1";s("klick_mos_reload",e,function(s){d(".klick-mos-overlay").hide(),d(".mos-list-table").html(s.data)})}function t(){d("#klick_mos_sc_name").val(""),d("#klick_mos_sc_name").prop("readonly",!1),d("#mos_command").val("add"),d("#klick_mos_sc_desc").val("");var s=tinymce.get("klick_mos_sc_editor");null!==s&&s.setContent(""),d("#klick_mos_sc_editor").val("")}function i(){d("#klick_mos_add_shortcode").hide(),d(".mos-list-container").show(),d("#klick_mos_shortcode_list").show()}function o(){d("#klick_mos_shortcode_list").hide(),d(".mos-list-container").hide(),d("#klick_mos_add_shortcode").show()}function a(s){return!/^[0-9a-zA-Z\-\s]+$/.test(s)}function n(s){return!/^[0-9a-zA-Z]+$/.test(s)}function _(s){var e=""==s.length;return e}function k(s,e){return d(""+s).addClass("klick-notice-message notice notice-error is-dismissible"),d(""+s).html("<p>"+e+"</p>"),d(""+s).slideDown(),d("#klick_mos_sc_save").attr("disabled","disabled"),!1}function l(){var s=d.trim(d("#klick_mos_sc_name").val());return _(s)===!0?(k(".klick-notice-message",klick_mos_admin.empty_status_name),!1):n(s)===!0?(k(".klick-notice-message",klick_mos_admin.notice_for_sc_name),!1):(d(".klick-notice-message").slideUp(),!0)}function m(){var s=d.trim(d("#klick_mos_sc_desc").val());return a(s)===!0?(k(".klick-notice-message",klick_mos_admin.notice_for_sc_desc),!1):(d(".klick-notice-message").slideUp(),!0)}var d=jQuery;d(".klick-mos-overlay").hide(),d("#klick_mos_add_shortcode").hide(),d("#klick_mos_nav_tab_wrapper .nav-tab").click(function(s){s.preventDefault();var e=d(this).attr("id");if(e&&"klick_mos_nav_tab_"==e.substring(0,18)){var e=e.substring(18);d("#klick_mos_nav_tab_wrapper .nav-tab:not(#klick_mos_nav_tab_"+e+")").removeClass("nav-tab-active"),d(this).addClass("nav-tab-active"),d(".klick-mos-nav-tab-contents:not(#klick_mos_nav_tab_contents_"+e+")").hide(),d("#klick_mos_nav_tab_contents_"+e).show()}}),d("#klick_mos_sc_add").click(function(s){s.preventDefault(),o(),t()}),d("#klick_mos_sc_cancel").click(function(s){s.preventDefault(),i()}),d("#klick_mos_sc_save").on("click",function(t){t.preventDefault();var o=d("#mos_command").val(),a=e(o);return a!==!1&&void s("klick_mos_save_settings",a,function(s){1==s.status.status&&(c(),i(),d(".klick-ajax-message").html(s.status.messages),d(".klick-ajax-message").slideDown(),d(".fade").delay(2e3).slideUp(200,function(){})),2==s.status.status&&(d(".klick-ajax-message").html(s.status.messages),d(".klick-ajax-message").slideDown(),d(".fade").delay(1e4).slideUp(200,function(){}))})}),d(document).on("click",".klick-mos-delete-row",function(e){e.preventDefault(),d(".klick-mos-overlay").show();var t=d(this).attr("data-id"),i="name="+t;s("klick_mos_delete_row",i,function(s){s.status===!0&&c()})}),d(document).on("click",".klick-mos-edit-row",function(e){e.preventDefault();var c=d(this).attr("data-id"),t="name="+c;s("klick_mos_edit_row",t,function(s){o(),d("#klick_mos_sc_desc").val(s.status.data.desc);var e=tinymce.get("klick_mos_sc_editor");null!==e&&e.setContent(s.status.data.content),d("#klick_mos_sc_editor").val(s.status.data.content),d("#klick_mos_sc_name").val(s.status.key),d("#klick_mos_sc_name").prop("readonly",!0),d("#mos_command").val("edit")})}),d("#klick_mos_sc_name").keyup(function(){d("#klick_mos_sc_save").attr("disabled",!1);var s=d.trim(d("#klick_mos_sc_name").val());n(s)===!0?k(".klick-notice-message",klick_mos_admin.notice_for_sc_name):d(".klick-notice-message").slideUp()}),d("#klick_mos_sc_desc").keyup(function(){d("#klick_mos_sc_save").attr("disabled",!1);var s=d.trim(d("#klick_mos_sc_desc").val());s.length>2&&(a(s)===!0?k(".klick-notice-message",klick_mos_admin.notice_for_sc_desc):d(".klick-notice-message").slideUp())})};